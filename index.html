<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏ô‡∏∏‡∏Å ‡∏õ.3</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Kanit', 'Chula', sans-serif;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            padding: 0;
            margin: 0;
            color: #333;
            overflow-x: hidden;
        }
        
        /* Main Container */
        #app {
            max-width: 500px;
            margin: 0 auto;
            min-height: 100vh;
            background: white;
            box-shadow: 0 0 30px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        /* Screens */
        .screen {
            display: none;
            padding: 20px;
            min-height: 100vh;
            flex-direction: column;
        }
        
        .screen.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Header */
        .header {
            text-align: center;
            padding: 20px 0;
            background: linear-gradient(90deg, #4CAF50, #2E7D32);
            color: white;
            border-radius: 0 0 20px 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }
        
        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        
        .header .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        /* Buttons */
        .btn {
            display: block;
            width: 100%;
            padding: 18px 15px;
            margin: 12px 0;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }
        
        .btn:active {
            transform: scale(0.98);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn-primary {
            background: linear-gradient(90deg, #FF9800, #FF5722);
        }
        
        .btn-secondary {
            background: linear-gradient(90deg, #2196F3, #1976D2);
        }
        
        .btn-success {
            background: linear-gradient(90deg, #4CAF50, #2E7D32);
        }
        
        .btn-danger {
            background: linear-gradient(90deg, #F44336, #D32F2F);
        }
        
        .btn-outline {
            background: white;
            color: #2196F3;
            border: 2px solid #2196F3;
        }
        
        .btn-small {
            padding: 10px 15px;
            font-size: 0.9rem;
            margin: 8px 0;
        }
        
        .btn-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .form-input:focus {
            border-color: #4CAF50;
            outline: none;
        }
        
        /* Cards */
        .card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 1px solid #eee;
        }
        
        .card-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-title i {
            color: #4CAF50;
        }
        
        /* Progress and Score */
        .score-display {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, #E3F2FD, #BBDEFB);
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .score-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1976D2;
            margin: 10px 0;
        }
        
        .stars {
            font-size: 1.8rem;
            color: #FFC107;
            letter-spacing: 5px;
            margin: 10px 0;
        }
        
        .progress-bar {
            height: 10px;
            background: #E0E0E0;
            border-radius: 5px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            border-radius: 5px;
            transition: width 0.5s ease;
        }
        
        /* Subject Cards */
        .subject-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }
        
        .subject-card {
            background: white;
            border-radius: 15px;
            padding: 20px 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .subject-card:active {
            transform: scale(0.95);
        }
        
        .subject-card:hover {
            border-color: #4CAF50;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        
        .subject-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .subject-name {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .subject-progress {
            font-size: 0.9rem;
            color: #666;
        }
        
        /* Exercise Types */
        .exercise-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .question-counter {
            text-align: center;
            font-size: 1rem;
            color: #666;
            margin-bottom: 10px;
        }
        
        .question-box {
            background: #F5F9FF;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #2196F3;
            flex: 1;
        }
        
        .question-text {
            font-size: 1.2rem;
            line-height: 1.5;
            margin-bottom: 20px;
        }
        
        /* Multiple Choice */
        .option {
            background: white;
            border: 2px solid #E0E0E0;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .option:hover {
            border-color: #BBDEFB;
            background: #F5F9FF;
        }
        
        .option.selected {
            border-color: #4CAF50;
            background: #E8F5E9;
        }
        
        .option.correct {
            border-color: #4CAF50;
            background: #E8F5E9;
        }
        
        .option.incorrect {
            border-color: #F44336;
            background: #FFEBEE;
        }
        
        .option-letter {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: #E0E0E0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .option.selected .option-letter {
            background: #4CAF50;
            color: white;
        }
        
        /* Drag and Drop */
        .drag-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .drag-item {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: move;
            user-select: none;
            font-weight: 600;
            box-shadow: 0 3px 6px rgba(33, 150, 243, 0.2);
        }
        
        .drop-zone {
            min-height: 100px;
            border: 3px dashed #BBDEFB;
            border-radius: 15px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            color: #666;
            background: #F5F9FF;
            transition: all 0.3s;
        }
        
        .drop-zone.highlight {
            border-color: #4CAF50;
            background: #E8F5E9;
        }
        
        /* Matching */
        .matching-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .match-pair {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #F5F9FF;
            padding: 15px;
            border-radius: 10px;
        }
        
        .match-item {
            padding: 10px 15px;
            background: white;
            border: 2px solid #E0E0E0;
            border-radius: 8px;
            min-width: 120px;
            text-align: center;
        }
        
        .match-line {
            flex: 1;
            height: 2px;
            background: #BBDEFB;
            margin: 0 15px;
        }
        
        /* Admin Panel */
        .admin-container {
            background: #F5F5F5;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .student-list {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
        }
        
        .student-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .student-name {
            font-weight: 600;
        }
        
        .student-score {
            background: #E3F2FD;
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: 600;
            color: #1976D32;
        }
        
        /* Feedback */
        .feedback {
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            animation: popIn 0.5s ease;
        }
        
        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .feedback.correct {
            background: #E8F5E9;
            border: 2px solid #4CAF50;
        }
        
        .feedback.incorrect {
            background: #FFEBEE;
            border: 2px solid #F44336;
        }
        
        .feedback-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            display: flex;
            justify-content: space-between;
            padding: 15px 20px;
            background: white;
            border-top: 1px solid #eee;
            margin-top: auto;
        }
        
        .nav-btn {
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            background: #F5F5F5;
            color: #555;
            flex: 1;
            margin: 0 5px;
        }
        
        .nav-btn:hover {
            background: #E0E0E0;
        }
        
        .nav-btn.primary {
            background: #2196F3;
            color: white;
        }
        
        /* Responsive */
        @media (max-width: 480px) {
            #app {
                max-width: 100%;
                border-radius: 0;
            }
            
            .header {
                border-radius: 0 0 20px 20px;
                margin-bottom: 15px;
            }
            
            .subject-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .btn {
                padding: 16px 15px;
                font-size: 1rem;
            }
        }
        
        /* Animations */
        .confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        
        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #f00;
            top: 0;
            opacity: 0;
        }
        
        /* Utility */
        .hidden {
            display: none !important;
        }
        
        .text-center {
            text-align: center;
        }
        
        .mt-10 {
            margin-top: 10px;
        }
        
        .mt-20 {
            margin-top: 20px;
        }
        
        .mb-10 {
            margin-bottom: 10px;
        }
        
        .mb-20 {
            margin-bottom: 20px;
        }
        
        .p-20 {
            padding: 20px;
        }
        
        .flex {
            display: flex;
        }
        
        .flex-col {
            flex-direction: column;
        }
        
        .items-center {
            align-items: center;
        }
        
        .justify-center {
            justify-content: center;
        }
        
        .justify-between {
            justify-content: space-between;
        }
        
        .w-100 {
            width: 100%;
        }
        
        /* Colors for subjects */
        .color-thai { color: #E91E63; }
        .color-math { color: #3F51B5; }
        .color-science { color: #009688; }
        .color-social { color: #FF9800; }
        .color-chinese { color: #F44336; }
        .color-computing { color: #9C27B0; }
        
        .bg-thai { background: linear-gradient(135deg, #E91E63, #AD1457); }
        .bg-math { background: linear-gradient(135deg, #3F51B5, #283593); }
        .bg-science { background: linear-gradient(135deg, #009688, #00695C); }
        .bg-social { background: linear-gradient(135deg, #FF9800, #EF6C00); }
        .bg-chinese { background: linear-gradient(135deg, #F44336, #C62828); }
        .bg-computing { background: linear-gradient(135deg, #9C27B0, #6A1B9A); }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 25px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: modalIn 0.3s ease;
        }
        
        @keyframes modalIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="screen active">
            <div class="header">
                <h1>üéí ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏ô‡∏∏‡∏Å ‡∏õ.3</h1>
                <div class="subtitle">‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≠‡∏ö‡∏Å‡∏•‡∏≤‡∏á‡∏†‡∏≤‡∏Ñ‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ</div>
            </div>
            
            <div class="p-20" style="flex: 1; display: flex; flex-direction: column; justify-content: center;">
                <div class="text-center mb-20">
                    <div style="font-size: 4rem; margin-bottom: 20px;">üìö</div>
                    <h2 style="font-size: 1.8rem; margin-bottom: 10px;">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö!</h2>
                    <p style="color: #666; line-height: 1.5;">‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÅ‡∏•‡∏∞‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô<br>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≠‡∏ö‡∏Å‡∏•‡∏≤‡∏á‡∏†‡∏≤‡∏Ñ‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞</p>
                </div>
                
                <div id="studentInfo" class="card" style="text-align: center;">
                    <h3 style="margin-bottom: 15px;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h3>
                    <input type="text" id="studentName" class="form-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" style="margin-bottom: 15px;">
                    <button id="startLearning" class="btn btn-primary btn-icon">
                        <i class="fas fa-play-circle"></i> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏¢!
                    </button>
                </div>
                
                <div class="text-center mt-20">
                    <button id="adminLoginBtn" class="btn btn-outline btn-small">
                        <i class="fas fa-user-cog"></i> ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Main Menu -->
        <div id="mainMenu" class="screen">
            <div class="header">
                <h1 id="greeting">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ!</h1>
                <div class="subtitle" id="studentScore">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: 0</div>
            </div>
            
            <div class="p-20">
                <div class="score-display">
                    <div style="font-size: 0.9rem; color: #666;">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
                    <div class="score-value" id="totalScore">0</div>
                    <div class="stars">‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
                    <div style="font-size: 0.9rem; color: #666;">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏î‡∏≤‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏°!</div>
                </div>
                
                <h2 class="card-title"><i class="fas fa-book-open"></i> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h2>
                
                <div class="subject-grid">
                    <!-- Subjects will be dynamically added here -->
                </div>
                
                <div class="mt-20">
                    <button id="viewScoresBtn" class="btn btn-outline btn-icon mb-10">
                        <i class="fas fa-chart-bar"></i> ‡∏î‡∏π‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
                    </button>
                    <button id="logoutBtn" class="btn btn-outline btn-icon">
                        <i class="fas fa-sign-out-alt"></i> ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
                    </button>
                </div>
            </div>
            
            <div class="bottom-nav">
                <button class="nav-btn" onclick="showScreen('mainMenu')">
                    <i class="fas fa-home"></i> ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                </button>
                <button class="nav-btn" onclick="showScreen('scoreScreen')">
                    <i class="fas fa-trophy"></i> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                </button>
                <button class="nav-btn" onclick="showAdminLogin()">
                    <i class="fas fa-cog"></i> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
                </button>
            </div>
        </div>
        
        <!-- Subject Screen -->
        <div id="subjectScreen" class="screen">
            <div class="header">
                <h1 id="subjectTitle">‡∏ß‡∏¥‡∏ä‡∏≤</h1>
                <div class="subtitle" id="subjectSubtitle">‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î</div>
            </div>
            
            <div class="p-20">
                <div class="exercise-container" id="subjectContent">
                    <!-- Content will be loaded dynamically -->
                </div>
            </div>
            
            <div class="bottom-nav">
                <button class="nav-btn" onclick="showScreen('mainMenu')">
                    <i class="fas fa-arrow-left"></i> ‡∏Å‡∏•‡∏±‡∏ö
                </button>
                <button class="nav-btn primary" onclick="startExercise()">
                    <i class="fas fa-play"></i> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î
                </button>
            </div>
        </div>
        
        <!-- Exercise Screen -->
        <div id="exerciseScreen" class="screen">
            <div class="header">
                <h1 id="exerciseTitle">‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î</h1>
                <div class="subtitle">
                    <span id="currentQuestion">1</span>/<span id="totalQuestions">10</span>
                </div>
            </div>
            
            <div class="p-20">
                <div class="exercise-container">
                    <div class="question-box">
                        <div class="question-text" id="questionText">
                            <!-- Question will be loaded dynamically -->
                        </div>
                        
                        <div id="optionsContainer">
                            <!-- Options will be loaded dynamically -->
                        </div>
                        
                        <div id="dragDropContainer" class="hidden">
                            <!-- Drag and drop content -->
                        </div>
                        
                        <div id="matchingContainer" class="hidden">
                            <!-- Matching content -->
                        </div>
                    </div>
                    
                    <div id="feedbackContainer" class="hidden"></div>
                    
                    <div id="exerciseButtons" class="flex justify-between mt-20">
                        <button id="prevBtn" class="btn btn-outline" style="width: 48%;">‡∏Ç‡πâ‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
                        <button id="nextBtn" class="btn btn-primary" style="width: 48%;">‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ</button>
                        <button id="submitBtn" class="btn btn-success w-100 hidden">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Score Screen -->
        <div id="scoreScreen" class="screen">
            <div class="header">
                <h1>üìä ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h1>
                <div class="subtitle">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>
            </div>
            
            <div class="p-20">
                <div id="scoreSummary" class="card">
                    <h3 class="card-title"><i class="fas fa-chart-line"></i> ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
                    <!-- Summary will be dynamically added -->
                </div>
                
                <div id="scoreDetails">
                    <!-- Score details will be dynamically added -->
                </div>
                
                <button class="btn btn-outline btn-icon w-100 mt-20" onclick="showScreen('mainMenu')">
                    <i class="fas fa-arrow-left"></i> ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                </button>
            </div>
        </div>
        
        <!-- Admin Login Screen -->
        <div id="adminLoginScreen" class="screen">
            <div class="header">
                <h1>üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h1>
                <div class="subtitle">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏π‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</div>
            </div>
            
            <div class="p-20" style="flex: 1; display: flex; flex-direction: column; justify-content: center;">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-lock"></i> ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h3>
                    <div class="form-group">
                        <input type="password" id="adminPassword" class="form-input" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô">
                    </div>
                    <div id="adminLoginError" class="hidden" style="color: #F44336; margin-bottom: 15px; text-align: center;">
                        ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!
                    </div>
                    <button id="adminLoginSubmit" class="btn btn-primary btn-icon">
                        <i class="fas fa-sign-in-alt"></i> ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                    </button>
                </div>
                
                <div class="text-center mt-20">
                    <button class="btn btn-outline btn-small" onclick="showScreen('welcomeScreen')">
                        <i class="fas fa-arrow-left"></i> ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Admin Dashboard -->
        <div id="adminDashboard" class="screen">
            <div class="header">
                <h1>üë®‚Äçüè´ ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h1>
                <div class="subtitle">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</div>
            </div>
            
            <div class="p-20">
                <div class="admin-container">
                    <h3 class="card-title"><i class="fas fa-users"></i> ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                    <div class="student-list" id="studentList">
                        <!-- Student list will be dynamically added -->
                    </div>
                </div>
                
                <div class="admin-container mt-20">
                    <h3 class="card-title"><i class="fas fa-cog"></i> ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö</h3>
                    <button class="btn btn-outline btn-icon w-100 mb-10" onclick="resetAllScores()">
                        <i class="fas fa-redo"></i> ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    </button>
                    <button class="btn btn-outline btn-icon w-100 mb-10" onclick="exportScores()">
                        <i class="fas fa-download"></i> ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
                    </button>
                    <button class="btn btn-danger btn-icon w-100" onclick="logoutAdmin()">
                        <i class="fas fa-sign-out-alt"></i> ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Confetti Container -->
    <div id="confettiContainer" class="confetti"></div>
    
    <!-- Success Modal -->
    <div id="successModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üéâ ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å!</h2>
                <button class="modal-close" onclick="hideModal('successModal')">√ó</button>
            </div>
            <div style="text-align: center; padding: 20px 0;">
                <div style="font-size: 4rem; margin-bottom: 20px;">üèÜ</div>
                <h3 style="margin-bottom: 10px;">‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!</h3>
                <p style="color: #666; margin-bottom: 20px;">‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô <span id="finalScore" style="font-weight: bold; color: #4CAF50;">0</span> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
                <div class="stars" id="finalStars">‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
            </div>
            <button class="btn btn-primary w-100" onclick="hideModal('successModal'); showScreen('mainMenu');">
                ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
            </button>
        </div>
    </div>

    <script>
        // ==================== ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏Å ====================
        
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
        let currentStudent = {
            name: '',
            scores: {
                'thai': [],
                'math': [],
                'science': [],
                'social': [],
                'chinese': [],
                'computing': []
            },
            totalScore: 0
        };
        
        // ‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        const subjects = [
            { id: 'thai', name: '‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢', icon: '‚úèÔ∏è', color: 'color-thai', bg: 'bg-thai' },
            { id: 'math', name: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', icon: '‚ûó', color: 'color-math', bg: 'bg-math' },
            { id: 'science', name: '‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', icon: 'üî¨', color: 'color-science', bg: 'bg-science' },
            { id: 'social', name: '‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤', icon: 'üåè', color: 'color-social', bg: 'bg-social' },
            { id: 'chinese', name: '‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô', icon: 'üá®üá≥', color: 'color-chinese', bg: 'bg-chinese' },
            { id: 'computing', name: '‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì', icon: 'üíª', color: 'color-computing', bg: 'bg-computing' }
        ];
        
        // ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤
        const subjectContents = {
            'thai': {
                title: '‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢',
                lessons: [
                    {
                        title: '‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏û‡∏¢‡∏±‡∏ç‡∏ä‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏™‡∏£‡∏∞‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á',
                        content: `
                            <div class="card">
                                <h3>‡∏û‡∏¢‡∏±‡∏ç‡∏ä‡∏ô‡∏∞‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á</h3>
                                <p>‡∏Ñ‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ñ‡∏≥ ‡πÅ‡∏ï‡πà‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á</p>
                                <div class="example">
                                    <p><strong>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:</strong></p>
                                    <p>üìñ <strong>‡∏õ‡∏£‡∏≤‡∏£‡∏ñ‡∏ô‡∏≤</strong> ‚Üí ‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡πà‡∏≤ <strong>‡∏õ‡∏£‡∏≤‡∏î-‡∏ñ‡∏∞-‡∏ô‡∏≤</strong> (‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á ‡∏£)</p>
                                    <p>üìñ <strong>‡∏û‡∏£‡∏≤‡∏´‡∏°‡∏ì‡πå</strong> ‚Üí ‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡πà‡∏≤ <strong>‡∏û‡∏£‡∏≤‡∏°</strong> (‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á ‡∏ì)</p>
                                </div>
                            </div>
                            <div class="card">
                                <h3>‡∏™‡∏£‡∏∞‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á</h3>
                                <p>‡∏™‡∏£‡∏∞ -‡∏¥ ‡∏´‡∏£‡∏∑‡∏≠ -‡∏∏ ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏ï‡∏±‡∏ß‡∏™‡∏∞‡∏Å‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ñ‡∏≥‡∏°‡∏±‡∏Å‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á</p>
                                <div class="example">
                                    <p><strong>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:</strong></p>
                                    <p>üìñ <strong>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</strong> ‚Üí ‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡πà‡∏≤ <strong>‡∏õ‡∏£‡∏∞-‡∏ß‡∏±‡∏î</strong> (‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á -‡∏¥)</p>
                                    <p>üìñ <strong>‡πÄ‡∏´‡∏ï‡∏∏</strong> ‚Üí ‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡πà‡∏≤ <strong>‡πÄ‡∏´‡∏î</strong> (‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á -‡∏∏)</p>
                                </div>
                            </div>
                        `,
                        exercises: [
                            {
                                type: 'multiple-choice',
                                question: '‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "‡πÄ‡∏°‡∏£‡∏∏" ‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£?',
                                options: ['‡πÄ‡∏°-‡∏£‡∏∏', '‡πÄ‡∏°‡∏ô', '‡πÄ‡∏°-‡∏£‡∏∞', '‡πÄ‡∏°‡∏¥‡∏ô'],
                                correct: 1,
                                explanation: '‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "‡πÄ‡∏°‡∏£‡∏∏" ‡∏°‡∏µ‡∏™‡∏£‡∏∞ -‡∏∏ ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏™‡∏∞‡∏Å‡∏î ‡∏à‡∏∂‡∏á‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á ‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡πà‡∏≤ "‡πÄ‡∏°‡∏ô"'
                            },
                            {
                                type: 'multiple-choice',
                                question: '‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "‡∏õ‡∏£‡∏≤‡∏£‡∏ñ‡∏ô‡∏≤" ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÉ‡∏î‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á?',
                                options: ['‡∏õ', '‡∏£', '‡∏ó', '‡∏ô'],
                                correct: 1,
                                explanation: '‡∏ï‡∏±‡∏ß "‡∏£" ‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "‡∏õ‡∏£‡∏≤‡∏£‡∏ñ‡∏ô‡∏≤" ‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á ‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡πà‡∏≤ "‡∏õ‡∏£‡∏≤‡∏î-‡∏ñ‡∏∞-‡∏ô‡∏≤"'
                            },
                            {
                                type: 'drag-drop',
                                question: '‡∏•‡∏≤‡∏Å‡∏Ñ‡∏≥‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á',
                                pairs: [
                                    { left: '‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥', right: '‡∏õ‡∏£‡∏∞-‡∏ß‡∏±‡∏î' },
                                    { left: '‡πÄ‡∏´‡∏ï‡∏∏', right: '‡πÄ‡∏´‡∏î' },
                                    { left: '‡πÄ‡∏Å‡∏©‡∏ï‡∏£', right: '‡∏Å‡∏∞-‡πÄ‡∏™‡∏î' }
                                ],
                                explanation: '‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏£‡∏∞ -‡∏¥ ‡∏´‡∏£‡∏∑‡∏≠ -‡∏∏ ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏™‡∏∞‡∏Å‡∏î ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏£‡∏∞‡∏ô‡∏±‡πâ‡∏ô'
                            }
                        ]
                    },
                    {
                        title: '‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ ‡∏ë, ‡∏§, ‡∏§‡πÖ',
                        content: `
                            <div class="card">
                                <h3>‡∏ë (‡∏°‡∏∞‡πÇ‡∏ë)</h3>
                                <p>‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ 2 ‡πÅ‡∏ö‡∏ö:</p>
                                <ul>
                                    <li>‡πÄ‡∏™‡∏µ‡∏¢‡∏á "‡∏î" ‡πÄ‡∏ä‡πà‡∏ô <strong>‡∏ö‡∏±‡∏ì‡∏ë‡∏¥‡∏ï</strong> (‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡πà‡∏≤ ‡∏ö‡∏±‡∏ô-‡∏î‡∏¥‡∏î)</li>
                                    <li>‡πÄ‡∏™‡∏µ‡∏¢‡∏á "‡∏ó" ‡πÄ‡∏ä‡πà‡∏ô <strong>‡∏°‡∏ì‡πÇ‡∏ë</strong> (‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡πà‡∏≤ ‡∏°‡∏ô-‡πÇ‡∏ó)</li>
                                </ul>
                            </div>
                            <div class="card">
                                <h3>‡∏§ (‡∏£‡∏∂)</h3>
                                <p>‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ 3 ‡πÅ‡∏ö‡∏ö:</p>
                                <ul>
                                    <li>‡πÄ‡∏™‡∏µ‡∏¢‡∏á "‡∏£‡∏∂" ‡πÄ‡∏ä‡πà‡∏ô <strong>‡∏§‡∏î‡∏π</strong></li>
                                    <li>‡πÄ‡∏™‡∏µ‡∏¢‡∏á "‡∏£‡∏¥" ‡πÄ‡∏ä‡πà‡∏ô <strong>‡∏§‡∏ó‡∏ò‡∏¥‡πå</strong></li>
                                    <li>‡πÄ‡∏™‡∏µ‡∏¢‡∏á "‡πÄ‡∏£‡∏≠" ‡πÄ‡∏ä‡πà‡∏ô <strong>‡∏§‡∏Å‡∏©‡πå</strong> (‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡πà‡∏≤ ‡πÄ‡∏£‡∏¥‡∏Å)</li>
                                </ul>
                            </div>
                        `,
                        exercises: [
                            {
                                type: 'multiple-choice',
                                question: '‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "‡∏ö‡∏±‡∏ì‡∏ë‡∏¥‡∏ï" ‡∏ï‡∏±‡∏ß ‡∏ë ‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏∞‡πÑ‡∏£?',
                                options: ['‡∏î', '‡∏ó', '‡∏ï', '‡∏ë'],
                                correct: 0,
                                explanation: '‡∏ë ‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "‡∏ö‡∏±‡∏ì‡∏ë‡∏¥‡∏ï" ‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏õ‡πá‡∏ô "‡∏î" (‡∏ö‡∏±‡∏ô-‡∏î‡∏¥‡∏î)'
                            },
                            {
                                type: 'multiple-choice',
                                question: '"‡∏§‡∏Å‡∏©‡πå" ‡∏≠‡πà‡∏≤‡∏ô‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏£‡∏∞‡πÉ‡∏î?',
                                options: ['‡∏£‡∏¥', '‡∏£‡∏∂', '‡πÄ‡∏£‡∏≠', '‡∏£‡∏≤'],
                                correct: 2,
                                explanation: '"‡∏§‡∏Å‡∏©‡πå" ‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡πà‡∏≤ "‡πÄ‡∏£‡∏¥‡∏Å" ‡πÉ‡∏ä‡πâ‡∏™‡∏£‡∏∞ "‡πÄ‡∏£‡∏≠"'
                            }
                        ]
                    }
                ]
            },
            'math': {
                title: '‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå',
                lessons: [
                    {
                        title: '‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£‡∏¢‡∏≤‡∏ß‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£‡∏™‡∏±‡πâ‡∏ô',
                        content: `
                            <div class="card">
                                <h3>‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£‡∏¢‡∏≤‡∏ß</h3>
                                <p>‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏ï‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏Å ‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô</p>
                                <div class="example">
                                    <p><strong>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:</strong> 828 √∑ 5</p>
                                    <p>5 √ó 165 = 825</p>
                                    <p>828 - 825 = 3</p>
                                    <p>‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö: <strong>165 ‡πÄ‡∏®‡∏© 3</strong></p>
                                </div>
                            </div>
                            <div class="card">
                                <h3>‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£‡∏™‡∏±‡πâ‡∏ô</h3>
                                <p>‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏£‡πá‡∏ß‡πÜ</p>
                                <div class="example">
                                    <p><strong>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:</strong> 4,948 √∑ 4</p>
                                    <p>4,948 √∑ 4 = <strong>1,237</strong></p>
                                </div>
                            </div>
                        `,
                        exercises: [
                            {
                                type: 'multiple-choice',
                                question: '828 √∑ 5 ‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏®‡∏©‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?',
                                options: ['165 ‡πÄ‡∏®‡∏© 3', '165 ‡πÄ‡∏®‡∏© 2', '166 ‡πÄ‡∏®‡∏© 3', '166 ‡πÄ‡∏®‡∏© 0'],
                                correct: 0,
                                explanation: '5 √ó 165 = 825, 828 - 825 = 3 ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏î‡πâ 165 ‡πÄ‡∏®‡∏© 3'
                            },
                            {
                                type: 'multiple-choice',
                                question: '4,948 √∑ 4 = ?',
                                options: ['1,237', '1,238', '1,247', '1,248'],
                                correct: 0,
                                explanation: '4,948 √∑ 4 = 1,237 ‡∏´‡∏≤‡∏£‡∏•‡∏á‡∏ï‡∏±‡∏ß‡∏û‡∏≠‡∏î‡∏µ'
                            }
                        ]
                    },
                    {
                        title: '‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß',
                        content: `
                            <div class="card">
                                <h3>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß</h3>
                                <ul>
                                    <li>10 ‡∏°‡∏¥‡∏•‡∏•‡∏¥‡πÄ‡∏°‡∏ï‡∏£ (‡∏°‡∏°.) = 1 ‡πÄ‡∏ã‡∏ô‡∏ï‡∏¥‡πÄ‡∏°‡∏ï‡∏£ (‡∏ã‡∏°.)</li>
                                    <li>100 ‡πÄ‡∏ã‡∏ô‡∏ï‡∏¥‡πÄ‡∏°‡∏ï‡∏£ (‡∏ã‡∏°.) = 1 ‡πÄ‡∏°‡∏ï‡∏£ (‡∏°.)</li>
                                    <li>1,000 ‡πÄ‡∏°‡∏ï‡∏£ (‡∏°.) = 1 ‡∏Å‡∏¥‡πÇ‡∏•‡πÄ‡∏°‡∏ï‡∏£ (‡∏Å‡∏°.)</li>
                                </ul>
                            </div>
                        `,
                        exercises: [
                            {
                                type: 'multiple-choice',
                                question: '485 ‡πÄ‡∏ã‡∏ô‡∏ï‡∏¥‡πÄ‡∏°‡∏ï‡∏£ ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏Å‡∏µ‡πà‡πÄ‡∏°‡∏ï‡∏£‡∏Å‡∏µ‡πà‡πÄ‡∏ã‡∏ô‡∏ï‡∏¥‡πÄ‡∏°‡∏ï‡∏£?',
                                options: ['4 ‡πÄ‡∏°‡∏ï‡∏£ 85 ‡∏ã‡∏°.', '48 ‡πÄ‡∏°‡∏ï‡∏£ 5 ‡∏ã‡∏°.', '4 ‡πÄ‡∏°‡∏ï‡∏£ 8.5 ‡∏ã‡∏°.', '40 ‡πÄ‡∏°‡∏ï‡∏£ 85 ‡∏ã‡∏°.'],
                                correct: 0,
                                explanation: '485 ‡∏ã‡∏°. = 400 ‡∏ã‡∏°. + 85 ‡∏ã‡∏°. = 4 ‡πÄ‡∏°‡∏ï‡∏£ 85 ‡∏ã‡∏°.'
                            }
                        ]
                    }
                ]
            },
            'science': {
                title: '‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå',
                lessons: [
                    {
                        title: '‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏',
                        content: `
                            <div class="card">
                                <h3>‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà</h3>
                                <p><strong>‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å:</strong> ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÅ‡∏¢‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô</p>
                                <p><strong>‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà:</strong> ‡∏ô‡∏≥‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏°‡∏≤‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏¥‡πà‡∏á‡πÉ‡∏´‡∏°‡πà</p>
                            </div>
                        `,
                        exercises: [
                            {
                                type: 'multiple-choice',
                                question: '‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÅ‡∏ö‡∏ö‡πÉ‡∏î?',
                                options: ['‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å', '‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà', '‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≠‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô', '‡∏Å‡∏≤‡∏£‡πÄ‡∏¢‡πá‡∏ô‡∏•‡∏á'],
                                correct: 0,
                                explanation: '‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡πÅ‡∏¢‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡πÜ'
                            }
                        ]
                    }
                ]
            }
        };
        
        // ==================== ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å ====================
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏≤‡∏Å localStorage
        function loadStudentData() {
            const savedName = localStorage.getItem('studentName');
            const savedScores = localStorage.getItem('studentScores');
            
            if (savedName) {
                currentStudent.name = savedName;
            }
            
            if (savedScores) {
                currentStudent.scores = JSON.parse(savedScores);
                calculateTotalScore();
            }
        }
        
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
        function saveStudentData() {
            localStorage.setItem('studentName', currentStudent.name);
            localStorage.setItem('studentScores', JSON.stringify(currentStudent.scores));
        }
        
        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°
        function calculateTotalScore() {
            let total = 0;
            let count = 0;
            
            for (const subject in currentStudent.scores) {
                const scores = currentStudent.scores[subject];
                if (scores.length > 0) {
                    const subjectTotal = scores.reduce((sum, score) => sum + score.score, 0);
                    const subjectMax = scores.reduce((sum, score) => sum + score.maxScore, 0);
                    total += (subjectTotal / subjectMax) * 100;
                    count++;
                }
            }
            
            currentStudent.totalScore = count > 0 ? Math.round(total / count) : 0;
            return currentStudent.totalScore;
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
        function showScreen(screenId) {
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
            document.getElementById(screenId).classList.add('active');
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
            if (screenId === 'mainMenu') {
                updateMainMenu();
            } else if (screenId === 'scoreScreen') {
                updateScoreScreen();
            }
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
        function updateMainMenu() {
            if (currentStudent.name) {
                document.getElementById('greeting').textContent = `‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ ${currentStudent.name}!`;
                document.getElementById('totalScore').textContent = currentStudent.totalScore;
                document.getElementById('studentScore').textContent = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: ${currentStudent.totalScore}`;
                
                // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏î‡∏≤‡∏ß
                const starsElement = document.querySelector('#mainMenu .stars');
                const starCount = Math.min(5, Math.floor(currentStudent.totalScore / 20));
                starsElement.innerHTML = '‚òÖ'.repeat(starCount) + '‚òÜ'.repeat(5 - starCount);
                
                // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ß‡∏¥‡∏ä‡∏≤
                const subjectGrid = document.querySelector('.subject-grid');
                subjectGrid.innerHTML = '';
                
                subjects.forEach(subject => {
                    const scores = currentStudent.scores[subject.id] || [];
                    const completed = scores.length;
                    
                    const card = document.createElement('div');
                    card.className = 'subject-card';
                    card.onclick = () => openSubject(subject.id);
                    
                    card.innerHTML = `
                        <div class="subject-icon ${subject.color}">${subject.icon}</div>
                        <div class="subject-name ${subject.color}">${subject.name}</div>
                        <div class="subject-progress">‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß ${completed} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
                    `;
                    
                    subjectGrid.appendChild(card);
                });
            }
        }
        
        // ‡πÄ‡∏õ‡∏¥‡∏î‡∏ß‡∏¥‡∏ä‡∏≤
        function openSubject(subjectId) {
            const subject = subjects.find(s => s.id === subjectId);
            const content = subjectContents[subjectId];
            
            if (subject && content) {
                document.getElementById('subjectTitle').textContent = content.title;
                document.getElementById('subjectSubtitle').textContent = '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô';
                
                // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤
                const subjectContent = document.getElementById('subjectContent');
                subjectContent.innerHTML = '';
                
                content.lessons.forEach((lesson, index) => {
                    const lessonCard = document.createElement('div');
                    lessonCard.className = 'card';
                    lessonCard.innerHTML = `
                        <h3>${lesson.title}</h3>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-outline btn-small" onclick="viewLesson('${subjectId}', ${index})" style="margin-right: 10px;">
                                <i class="fas fa-book"></i> ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤
                            </button>
                            <button class="btn btn-primary btn-small" onclick="startExerciseForLesson('${subjectId}', ${index})">
                                <i class="fas fa-play"></i> ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î
                            </button>
                        </div>
                    `;
                    subjectContent.appendChild(lessonCard);
                });
                
                showScreen('subjectScreen');
            }
        }
        
        // ‡∏î‡∏π‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
        function viewLesson(subjectId, lessonIndex) {
            const lesson = subjectContents[subjectId].lessons[lessonIndex];
            
            const subjectContent = document.getElementById('subjectContent');
            subjectContent.innerHTML = `
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3>${lesson.title}</h3>
                        <button class="btn btn-outline btn-small" onclick="openSubject('${subjectId}')">
                            <i class="fas fa-arrow-left"></i> ‡∏Å‡∏•‡∏±‡∏ö
                        </button>
                    </div>
                    ${lesson.content}
                </div>
            `;
        }
        
        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
        let currentExercise = null;
        let currentAnswers = [];
        let currentQuestionIndex = 0;
        
        function startExerciseForLesson(subjectId, lessonIndex) {
            const lesson = subjectContents[subjectId].lessons[lessonIndex];
            currentExercise = {
                subjectId: subjectId,
                lessonIndex: lessonIndex,
                questions: lesson.exercises,
                startTime: new Date()
            };
            
            currentQuestionIndex = 0;
            currentAnswers = [];
            
            document.getElementById('exerciseTitle').textContent = `‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î: ${lesson.title}`;
            showScreen('exerciseScreen');
            loadQuestion();
        }
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
        function loadQuestion() {
            if (!currentExercise || currentQuestionIndex >= currentExercise.questions.length) {
                finishExercise();
                return;
            }
            
            const question = currentExercise.questions[currentQuestionIndex];
            const totalQuestions = currentExercise.questions.length;
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('totalQuestions').textContent = totalQuestions;
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
            document.getElementById('questionText').textContent = question.question;
            
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            document.getElementById('optionsContainer').classList.add('hidden');
            document.getElementById('dragDropContainer').classList.add('hidden');
            document.getElementById('matchingContainer').classList.add('hidden');
            document.getElementById('feedbackContainer').classList.add('hidden');
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°
            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            document.getElementById('nextBtn').classList.toggle('hidden', currentQuestionIndex === totalQuestions - 1);
            document.getElementById('submitBtn').classList.add('hidden');
            
            // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
            if (question.type === 'multiple-choice') {
                loadMultipleChoiceQuestion(question);
            } else if (question.type === 'drag-drop') {
                loadDragDropQuestion(question);
            } else if (question.type === 'matching') {
                loadMatchingQuestion(question);
            }
        }
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≠‡∏ö
        function loadMultipleChoiceQuestion(question) {
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.classList.remove('hidden');
            optionsContainer.innerHTML = '';
            
            const letters = ['‡∏Å', '‡∏Ç', '‡∏Ñ', '‡∏á'];
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">${letters[index]}</div>
                    <div>${option}</div>
                `;
                
                optionElement.onclick = () => {
                    // ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    document.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ô‡∏µ‡πâ
                    optionElement.classList.add('selected');
                    
                    // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
                    currentAnswers[currentQuestionIndex] = index;
                    
                    // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
                    document.getElementById('submitBtn').classList.remove('hidden');
                    document.getElementById('nextBtn').classList.add('hidden');
                };
                
                optionsContainer.appendChild(optionElement);
            });
        }
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏•‡∏≤‡∏Å‡∏ß‡∏≤‡∏á
        function loadDragDropQuestion(question) {
            const container = document.getElementById('dragDropContainer');
            container.classList.remove('hidden');
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ items ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏≤‡∏Å
            const items = question.pairs.map(pair => pair.left);
            const shuffledItems = [...items].sort(() => Math.random() - 0.5);
            
            container.innerHTML = `
                <div class="drop-zone" id="dropZone">
                    ‡∏•‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
                </div>
                <div class="drag-container" id="dragContainer">
                    ${shuffledItems.map(item => `
                        <div class="drag-item" draggable="true">${item}</div>
                    `).join('')}
                </div>
            `;
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏° event listeners ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö drag and drop
            setupDragAndDrop();
        }
        
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ drag and drop
        function setupDragAndDrop() {
            const dragItems = document.querySelectorAll('.drag-item');
            const dropZone = document.getElementById('dropZone');
            
            dragItems.forEach(item => {
                item.addEventListener('dragstart', dragStart);
            });
            
            dropZone.addEventListener('dragover', dragOver);
            dropZone.addEventListener('drop', drop);
        }
        
        function dragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.textContent);
        }
        
        function dragOver(e) {
            e.preventDefault();
            e.target.classList.add('highlight');
        }
        
        function drop(e) {
            e.preventDefault();
            const data = e.dataTransfer.getData('text/plain');
            e.target.textContent = `‡∏ß‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß: ${data}`;
            e.target.classList.remove('highlight');
            
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
            currentAnswers[currentQuestionIndex] = data;
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
            document.getElementById('submitBtn').classList.remove('hidden');
        }
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà
        function loadMatchingQuestion(question) {
            const container = document.getElementById('matchingContainer');
            container.classList.remove('hidden');
            
            // ‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏π‡πà
            const shuffledPairs = [...question.pairs].sort(() => Math.random() - 0.5);
            
            container.innerHTML = `
                <div class="matching-container">
                    ${shuffledPairs.map((pair, index) => `
                        <div class="match-pair">
                            <div class="match-item" data-left="${pair.left}">${pair.left}</div>
                            <div class="match-line"></div>
                            <div class="match-item" data-right="${pair.right}">${pair.right}</div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ
            const matchItems = container.querySelectorAll('.match-item');
            matchItems.forEach(item => {
                item.onclick = () => {
                    item.classList.toggle('selected');
                };
            });
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
            document.getElementById('submitBtn').classList.remove('hidden');
        }
        
        // ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
        function submitAnswer() {
            const question = currentExercise.questions[currentQuestionIndex];
            const userAnswer = currentAnswers[currentQuestionIndex];
            let isCorrect = false;
            
            if (question.type === 'multiple-choice') {
                isCorrect = userAnswer === question.correct;
            } else if (question.type === 'drag-drop') {
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏•‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                isCorrect = true; // ‡πÉ‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏ß‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
            }
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö
            showFeedback(isCorrect, question.explanation || '');
            
            // ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå
            if (isCorrect) {
                playCorrectSound();
            } else {
                playIncorrectSound();
            }
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏õ‡∏∏‡πà‡∏°
            document.getElementById('submitBtn').classList.add('hidden');
            document.getElementById('nextBtn').classList.remove('hidden');
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö
        function showFeedback(isCorrect, explanation) {
            const feedbackContainer = document.getElementById('feedbackContainer');
            feedbackContainer.classList.remove('hidden');
            
            if (isCorrect) {
                feedbackContainer.innerHTML = `
                    <div class="feedback correct">
                        <div class="feedback-title">
                            <i class="fas fa-check-circle"></i> ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß!
                        </div>
                        <p>${explanation}</p>
                    </div>
                `;
            } else {
                feedbackContainer.innerHTML = `
                    <div class="feedback incorrect">
                        <div class="feedback-title">
                            <i class="fas fa-times-circle"></i> ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
                        </div>
                        <p>${explanation}</p>
                    </div>
                `;
            }
        }
        
        // ‡πÑ‡∏õ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏õ
        function nextQuestion() {
            if (currentQuestionIndex < currentExercise.questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                finishExercise();
            }
        }
        
        // ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }
        
        // ‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î
        function finishExercise() {
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
            let correctCount = 0;
            const totalQuestions = currentExercise.questions.length;
            
            for (let i = 0; i < totalQuestions; i++) {
                const question = currentExercise.questions[i];
                const userAnswer = currentAnswers[i];
                
                if (question.type === 'multiple-choice') {
                    if (userAnswer === question.correct) {
                        correctCount++;
                    }
                } else {
                    // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÉ‡∏´‡πâ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏ñ‡∏π‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ
                    correctCount++;
                }
            }
            
            const score = Math.round((correctCount / totalQuestions) * 100);
            
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
            const subjectId = currentExercise.subjectId;
            if (!currentStudent.scores[subjectId]) {
                currentStudent.scores[subjectId] = [];
            }
            
            currentStudent.scores[subjectId].push({
                score: correctCount,
                maxScore: totalQuestions,
                date: new Date().toISOString(),
                lesson: currentExercise.lessonIndex
            });
            
            calculateTotalScore();
            saveStudentData();
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
            showResultModal(score, correctCount, totalQuestions);
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏°‡∏î‡∏≠‡∏•‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
        function showResultModal(score, correct, total) {
            document.getElementById('finalScore').textContent = `${score}% (${correct}/${total})`;
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏î‡∏≤‡∏ß
            const starCount = Math.min(5, Math.floor(score / 20));
            document.getElementById('finalStars').innerHTML = '‚òÖ'.repeat(starCount) + '‚òÜ'.repeat(5 - starCount);
            
            // ‡πÅ‡∏™‡∏î‡∏á confetti ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á
            if (score >= 80) {
                createConfetti();
            }
            
            // ‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏°‡∏î‡∏≠‡∏•
            document.getElementById('successModal').classList.remove('hidden');
        }
        
        // ‡∏ã‡πà‡∏≠‡∏ô‡πÇ‡∏°‡∏î‡∏≠‡∏•
        function hideModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á confetti
        function createConfetti() {
            const confettiContainer = document.getElementById('confettiContainer');
            confettiContainer.innerHTML = '';
            
            const colors = ['#FF6B6B', '#4ECDC4', '#FFD166', '#06D6A0', '#118AB2'];
            
            for (let i = 0; i < 100; i++) {
                const piece = document.createElement('div');
                piece.className = 'confetti-piece';
                piece.style.left = Math.random() * 100 + '%';
                piece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                piece.style.opacity = '1';
                
                confettiContainer.appendChild(piece);
                
                // ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô
                const animation = piece.animate([
                    { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                    { transform: `translateY(${window.innerHeight}px) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                ], {
                    duration: 1000 + Math.random() * 2000,
                    easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
                });
                
                animation.onfinish = () => piece.remove();
            }
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
        function updateScoreScreen() {
            const scoreSummary = document.getElementById('scoreSummary');
            const scoreDetails = document.getElementById('scoreDetails');
            
            // ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
            scoreSummary.innerHTML = `
                <h3 class="card-title"><i class="fas fa-chart-line"></i> ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
                <div style="text-align: center; padding: 20px 0;">
                    <div style="font-size: 3rem; color: #1976D2; font-weight: bold;">${currentStudent.totalScore}%</div>
                    <div class="stars" style="font-size: 2rem; margin: 10px 0;">
                        ${'‚òÖ'.repeat(Math.floor(currentStudent.totalScore / 20))}${'‚òÜ'.repeat(5 - Math.floor(currentStudent.totalScore / 20))}
                    </div>
                    <p>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤</p>
                </div>
            `;
            
            // ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
            scoreDetails.innerHTML = '<h3 class="card-title"><i class="fas fa-list"></i> ‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤</h3>';
            
            subjects.forEach(subject => {
                const scores = currentStudent.scores[subject.id] || [];
                let subjectScore = 0;
                
                if (scores.length > 0) {
                    const total = scores.reduce((sum, s) => sum + s.score, 0);
                    const max = scores.reduce((sum, s) => sum + s.maxScore, 0);
                    subjectScore = Math.round((total / max) * 100);
                }
                
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-size: 1.2rem; font-weight: bold; ${subject.color}">${subject.name}</div>
                            <div style="color: #666;">‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß ${scores.length} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
                        </div>
                        <div style="font-size: 1.5rem; font-weight: bold; color: ${subjectScore >= 70 ? '#4CAF50' : '#F44336'}">
                            ${subjectScore}%
                        </div>
                    </div>
                    <div class="progress-bar" style="margin-top: 10px;">
                        <div class="progress-fill" style="width: ${subjectScore}%"></div>
                    </div>
                `;
                
                scoreDetails.appendChild(card);
            });
        }
        
        // ==================== ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô ====================
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
        function showAdminLogin() {
            showScreen('adminLoginScreen');
        }
        
        // ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
        function loginAdmin() {
            const password = document.getElementById('adminPassword').value;
            const errorElement = document.getElementById('adminLoginError');
            
            // ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô (‡πÉ‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤)
            if (password === 'admin123') {
                errorElement.classList.add('hidden');
                showAdminDashboard();
            } else {
                errorElement.classList.remove('hidden');
            }
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
        function showAdminDashboard() {
            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            const studentList = document.getElementById('studentList');
            studentList.innerHTML = '';
            
            // ‡πÉ‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÅ‡∏ï‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô
            if (currentStudent.name) {
                const studentItem = document.createElement('div');
                studentItem.className = 'student-item';
                studentItem.innerHTML = `
                    <div>
                        <div class="student-name">${currentStudent.name}</div>
                        <div style="color: #666; font-size: 0.9rem;">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: ${new Date().toLocaleDateString('th-TH')}</div>
                    </div>
                    <div class="student-score">${currentStudent.totalScore}%</div>
                `;
                studentList.appendChild(studentItem);
            }
            
            showScreen('adminDashboard');
        }
        
        // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        function resetAllScores() {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ')) {
                currentStudent.scores = {
                    'thai': [],
                    'math': [],
                    'science': [],
                    'social': [],
                    'chinese': [],
                    'computing': []
                };
                currentStudent.totalScore = 0;
                saveStudentData();
                alert('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
                showAdminDashboard();
            }
        }
        
        // ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
        function exportScores() {
            const dataStr = JSON.stringify(currentStudent, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `scores_${currentStudent.name}_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }
        
        // ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
        function logoutAdmin() {
            showScreen('welcomeScreen');
        }
        
        // ==================== ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á ====================
        
        function playCorrectSound() {
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡∏î‡πâ‡∏ß‡∏¢ Web Audio API
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 800;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.log('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ');
            }
        }
        
        function playIncorrectSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 300;
                oscillator.type = 'sawtooth';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            } catch (e) {
                console.log('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ');
            }
        }
        
        // ==================== ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö ====================
        
        // ‡πÄ‡∏°‡∏∑‡πà‡∏≠ DOM ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
        document.addEventListener('DOMContentLoaded', function() {
            // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            loadStudentData();
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ event listeners
            document.getElementById('startLearning').addEventListener('click', function() {
                const name = document.getElementById('studentName').value.trim();
                if (name) {
                    currentStudent.name = name;
                    saveStudentData();
                    updateMainMenu();
                    showScreen('mainMenu');
                } else {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì');
                }
            });
            
            document.getElementById('studentName').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('startLearning').click();
                }
            });
            
            document.getElementById('viewScoresBtn').addEventListener('click', function() {
                updateScoreScreen();
                showScreen('scoreScreen');
            });
            
            document.getElementById('logoutBtn').addEventListener('click', function() {
                if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                    showScreen('welcomeScreen');
                }
            });
            
            document.getElementById('adminLoginBtn').addEventListener('click', showAdminLogin);
            document.getElementById('adminLoginSubmit').addEventListener('click', loginAdmin);
            
            document.getElementById('adminPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    loginAdmin();
                }
            });
            
            // ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î
            document.getElementById('prevBtn').addEventListener('click', prevQuestion);
            document.getElementById('nextBtn').addEventListener('click', nextQuestion);
            document.getElementById('submitBtn').addEventListener('click', submitAnswer);
            
            // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
            if (currentStudent.name) {
                updateMainMenu();
                showScreen('mainMenu');
            }
        });
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å onclick
        window.showScreen = showScreen;
        window.openSubject = openSubject;
        window.viewLesson = viewLesson;
        window.startExerciseForLesson = startExerciseForLesson;
        window.startExercise = function() {
            if (currentExercise) {
                startExerciseForLesson(currentExercise.subjectId, currentExercise.lessonIndex);
            }
        };
        window.showAdminLogin = showAdminLogin;
        window.hideModal = hideModal;
        window.resetAllScores = resetAllScores;
        window.exportScores = exportScores;
        window.logoutAdmin = logoutAdmin;
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô helper
        window.nextQuestion = nextQuestion;
        window.prevQuestion = prevQuestion;
        window.submitAnswer = submitAnswer;
    </script>
</body>
</html>
